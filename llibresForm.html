<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
        
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <title>Nou Autor</title>
    <script src="creacioLlibres.js"></script>

    <script>

    const dades = fetch('https://serverred.es/api/autores/')
    .then(response => response.json())
    .then(data => {

        data["resultado"].forEach( element => {

            var select = document.getElementById("autors");
            var option = document.createElement("option");
            option.setAttribute("value", element._id);
            option.setAttribute("id", "autor");
            option.innerHTML = element.nombre;

            select.appendChild(option);


        })
    
    })    
    .catch((error) => {
        console.error('Error:', error);
    });
    </script>
</head>
<body>

        <form>
            
                <p>Titol: </p><input class="form-control" id="titol" type="text" maxlength="50" pattern="^([a-zA-Z]|\s)*$">
                <p>Editorial: </p><input class="form-control" id="editorial"type="text" maxlength="20" pattern="^([a-zA-Z]|\s)*$">
                <p>Preu: </p><input class="form-control" id="preu"type="number" maxlength="20" pattern="[0-9]{0,4}">
                <br>

                <p>Autor: </p>
                <select name="autors" id="autors">


                </select>
                <br>
                <br>
                <button class="btn btn-warning" id="enviar">Crear un llibre nou</button>
                <a class="btn btn-warning" href="llibres.html">Tornar</a>
    
        </form>

            <p id="missatgeError"></p>
    
</body>
</html>